<?xml version="1.0" encoding="utf-8"?>
<android.support.design.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:id="@+id/bd_sliding_up_panel"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <!-- Background Image -->
    <ImageView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/testimage"
        android:scaleType="fitXY"/>

    <!-- Main Content -->
    <ScrollView
        android:id="@+id/bd_scrollview"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <!-- Displays content in rows -->
        <LinearLayout
            android:id="@+id/bd_linear_layout"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingTop="@dimen/scroll_offset"
            android:orientation="vertical">

            <!-- Top row of information -->
            <RelativeLayout
                android:id="@+id/bd_top_row_layout"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="@color/colorPrimary700"
                android:orientation="horizontal">

                <!-- Preview Image -->
                <ImageView
                    android:id="@+id/bd_small_image"
                    android:layout_width="@dimen/large_book_width"
                    android:layout_height="@dimen/large_book_height"
                    android:padding="@dimen/margin"
                    android:src="@drawable/testimage" />

                <!-- Brief book info -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:padding="@dimen/margin"
                    android:layout_alignParentTop="true"
                    android:layout_toRightOf="@+id/bd_small_image"
                    android:layout_toEndOf="@+id/bd_small_image"
                    android:id="@+id/linearLayout">

                    <TextView
                        android:id="@+id/bd_title"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Book Title"
                        android:textColor="@android:color/black"
                        android:textSize="@dimen/text_h2" />

                    <TextView
                        android:id="@+id/bd_subtitle"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="subtitle if applicable"
                        android:textColor="@android:color/black"
                        android:textSize="@dimen/text" />

                    <TextView
                        android:id="@+id/bd_authors"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="authors"
                        android:textColor="@color/colorSecondaryText"
                        android:textSize="@dimen/text" />

                </LinearLayout>

                <!-- Buttons -->
                <FrameLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_toRightOf="@id/bd_small_image"
                    android:layout_toEndOf="@id/bd_small_image"
                    android:layout_alignBottom="@id/bd_small_image">

                    <include layout="@layout/book_details_top_row" />

                </FrameLayout>
            </RelativeLayout>

            <!-- Second Row - Description - Must be nested in LinearLayout for fading edge to work -->
            <LinearLayout
                android:id="@+id/bd_description_layout"
                android:orientation="vertical"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:requiresFadingEdge="vertical"
                android:fadingEdgeLength="100dp">

                <TextView
                    android:id="@+id/bd_description"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:background="@color/colorPrimary700"
                    android:textSize="@dimen/text"
                    android:padding="@dimen/margin"
                    android:lines="7"
                    android:ellipsize="none"
                    android:text="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam vehicula venenatis urna, quis gravida felis ornare quis. Maecenas sodales at sapien nec dignissim. Vivamus lacus arcu, euismod in lorem ut, sollicitudin congue orci. Praesent at ipsum et quam aliquet consectetur. Nulla pellentesque tristique ultricies. Morbi lacinia est lorem, non accumsan."
                    android:requiresFadingEdge="vertical"
                    android:fadingEdgeLength="100dp"/>
            </LinearLayout>

            <!-- Third Row - Contains Rating bar and share button -->
            <RelativeLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="@color/colorPrimary300">

                <!-- Seperator needed to fill in empty space with background -->
                <View
                    android:id="@+id/bd_separator"
                    android:layout_width="match_parent"
                    android:layout_height="56dp"
                    android:background="@color/colorPrimary300"
                    android:layout_alignParentTop="true"/>

                <TextView
                    android:id="@+id/bd_avg_rating"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:textColor="@android:color/black"
                    android:textSize="@dimen/text_h1"
                    android:padding="@dimen/margin"
                    android:text="4.1"
                    android:layout_centerVertical="true"
                    android:layout_below="@id/bd_separator"/>

                <com.iarcuschin.simpleratingbar.SimpleRatingBar
                    android:id="@+id/bd_ratingbar"
                    android:layout_width="@dimen/ratingbar_width"
                    android:layout_height="wrap_content"
                    android:layout_toRightOf="@id/bd_avg_rating"
                    android:padding="@dimen/margin"
                    android:numStars="5"
                    app:srb_stepSize="0.5"
                    app:srb_borderColor="@color/colorAccent200"
                    app:srb_fillColor="@color/colorAccent200"
                    android:layout_below="@id/bd_separator"/>

                <TextView
                    android:id="@+id/bd_num_ratings"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:textColor="@android:color/black"
                    android:textSize="@dimen/text"
                    android:text="15 Ratings"
                    android:layout_below="@id/bd_ratingbar"
                    android:layout_alignLeft="@id/bd_ratingbar"
                    android:paddingLeft="@dimen/margin"
                    android:paddingTop="5dp"
                    android:layout_alignParentBottom="true"/>

                <android.support.v7.widget.AppCompatImageView
                    android:layout_width="@dimen/ic_diameter"
                    android:layout_height="@dimen/ic_diameter"
                    app:srcCompat="@drawable/ic_share_black"
                    android:layout_alignParentRight="true"
                    android:layout_centerInParent="true"
                    android:layout_margin="@dimen/margin"
                    android:scaleType="centerCrop" />
            </RelativeLayout>

            <FrameLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="@color/colorPrimary300">

                <ListView
                    android:id="@+id/bd_comments_layout"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_margin="@dimen/margin"
                    android:background="@color/colorPrimary100">

                </ListView>
            </FrameLayout>

        </LinearLayout>
    </ScrollView>

    <!-- Description FAB -->
    <android.support.design.widget.FloatingActionButton
        android:id="@+id/bd_fab_description"
        android:layout_width="@dimen/fab_diameter"
        android:layout_height="@dimen/fab_diameter"
        app:fabSize="normal"
        app:layout_anchor="@id/bd_description_layout"
        app:layout_anchorGravity="bottom|center_horizontal"
        app:srcCompat="@drawable/ic_add_white"
        android:scaleType="centerCrop"/>

</android.support.design.widget.CoordinatorLayout>